/* 858fcd6 */(function(){function f(){return function(){}}var q;function s(a,b,c){function d(){}var e,g,h=arguments.length,k;"function"!=typeof b?(e=function(){return a.apply(this,arguments)},g=0):(e=b,g=1);d.prototype=a.prototype;for(e.prototype=new d;++g<h;)for(k in arguments[g])e.prototype[k]=arguments[g][k];return e.prototype.constructor=e}function t(a,b){var c=0,d=0;return function(){var e,g=a/b;++d<b?c+=g-(e=Math.floor(c+g)):d==b&&(e=Math.round(c+g));return e}}
var u={od:document.cookie.toQueryParams(/;\s*/),qa:window.location.search.toQueryParams(),sb:"ontouchstart"in window||window.navigator.msMaxTouchPoints};function aa(a,b){var c;return function(){clearTimeout(c);c=setTimeout(a.curry.apply(a,arguments),b)}}
String.prototype.C=function(a){var b=arguments,c=0;return this.replace(/%(?:(\d+)\$)?(\+?)(0| |'.)?(-)?(\d*)(?:\.(\d+))?([bcdeEfosuxX%])/g,function(a,e,g,h,k,l,m,n){n=1<<"sbeoxdXfcEu".indexOf(n);if(1>n)return"%";a=b[e?e-1:c++];a=n&1?void 0==a?"":a+"":!0===a?1:(n&644?parseFloat(a):parseInt(a,10))||0;g=n&676&&0>a?"-":g;a=1<n&&0>a?n&346?a+4294967296:-a:a;if(n&256)return String.fromCharCode(a%n);m=n&10?n:n&80?16:n&645?m?m:n&1?a.length:6:0;a=n&1?a.slice(0,m):n&516?a.toExponential(m):n&90?a.toString(m):
a.toFixed(m);(e=[,g,,32<n?a.toUpperCase():a])["0"==h?2:k?4:0]=(h?h.slice(-1):" ").times(l-(g+a).length);return e.join("")})};
function ba(a,b){var c,d,e,g,h=[],k=[],l=a.replace(/<.*?>/g,function(a){return" ".times(a.length)}).toLowerCase();c=0;for(d=b.length;c<d;c++)if(e=0,g=b[c].length)for(;~(e=l.indexOf(b[c],e));)h.push(e),h.push(-(e+=g));if(0==h.length)return a+"";h.sort(function(a,b){var c=Math.abs(a),d=Math.abs(b);return c==d?a<b?1:0:c<d?-1:1});for(c=0;c<h.length-1;)0>h[c]?0>h[c+1]?h.splice(c,1):c++:0>h[c+1]?c++:h.splice(c+1,1);k.push(a.substring(0,h[0]));h.push(a.length);c=0;for(d=h.length-1;c<d;c+=2)k.push('<span class="highlight">'),
k.push(a.substring(h[c],-h[c+1])),k.push("</span>"),k.push(a.substring(-h[c+1],h[c+2]));return k.join("")}Math.I=function(a,b,c){return c>(a=b<a?a:b)?a:c};Math.truncate=function(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)};function ca(a,b){for(var c=a.concat(),d=c.length;d--;)c[d]*=b;return c}function da(a,b){var c=a.length-1;a.sort(b);b=b||function(a,b){return a===b?0:1};if(0<c)for(;c--;)0===b(a[c],a[c+1])&&a.splice(c,1);return a}Prototype.Browser.jd=!!window.ActiveXObject&&!window.XMLHttpRequest;
Effect.Transitions.qd=function(a){return Math.pow(a,0.25)};
Element.addMethods({qc:1,jb:2,oc:3,pc:4,zb:function(a,b,c,d){a=$(a);var e=a.getOffsetParent(),g=a.offsetTop,h=g-e.offsetHeight+a.offsetHeight,k=e.offsetHeight<a.offsetHeight;if(e.scrollTop>a.offsetTop||e.scrollTop<h)b=k||b==Element.qc||"undefined"==typeof b?g:b==Element.oc?h:b==Element.jb?g-(e.offsetHeight-a.offsetHeight>>1):e.scrollTop<h?h:g,c?new Effect.Tween(e,e.scrollTop,b,Object.extend({duration:0.15,cd:Effect.Transitions.sinoidal},d||{}),"scrollTop"):e.scrollTop=b;return a}});
var fa={onCreate:function(a){a.ic=setTimeout(function(){if(!a._complete){a.cancel();var b=new Ajax.Response(a);(a.options.Ad||a.options.xd||Prototype.emptyFunction)(b,b.headerJSON)}},0<a.options.timeout?1E3*a.options.timeout:a.zc)},onComplete:function(a){a.ic&&clearTimeout(a.ic)}},ga={zc:8E3,Cd:function(a){return new this.constructor(this.url,Object.extend(this.options,a||{}))},cancel:function(){if(!this._complete){this.transport.onreadystatechange=Prototype.emptyFunction;this.transport.abort();var a=
new Ajax.Response(this);try{(this.options.ud||Prototype.emptyFunction)(a,a.headerJSON),Ajax.Responders.dispatch("onComplete",this,a,a.headerJSON)}catch(b){this.dispatchException(b)}}}},ha=function(){function a(a){var b=a.url||"",c=a.method,d=a.options.Bd||{},e=b.indexOf("?");a=-1==e?b:b.substring(0,e);b=Object.toQueryString(Object.extend((-1==e?"":b.substring(e)).toQueryParams(),"get"==c?d:{})).split("&").sort().uniq(!0).join("&");c=Object.toQueryString("get"==c?{}:Object.extend({kd:c},d)).split("&").sort().uniq(!0).join("&");
return[a,b,c].join("|")}var b=Ajax.Request.prototype.request,c=Ajax.Request.prototype.respondToReadyState,d,e;d={};e=0;setInterval(function(){2E3<e&&(d={},e=0)},18E4);return{Db:!1,Zb:!1,request:function(c){var e;this.url=c;this.method=this.options.method;if(this.options.Db&&!this.options.Zb&&a(this)in d)try{var k;var l=a(this);l in d?(d[l].Ec++,d[l].Ic=new Date,k=d[l].transport):k=this.transport;this.transport=k;e=new Ajax.Response(this);this.options.Qc&&this.options.Qc(e);Ajax.Responders.dispatch("onCreate",
this,e);this.respondToReadyState(4)}catch(m){this.dispatchException(m)}else b.call(this,c)},respondToReadyState:function(b){c.call(this,b);!(this.options.Db&&this._complete&&this.success())||!this.options.Zb&&a(this)in d||(b=this.transport.responseText.length,e++,d[a(this)]={transport:this.transport,Ec:0,pd:new Date,Ic:new Date,nd:b})}}}();Ajax.Request.addMethods(ha);Ajax.Request.addMethods(ga);u.ib=function(a,b){for(var c in b)switch(c){case "id":a.id=b[c];break;case "title":a.title=b[c];break;case "description":a.description=b[c];break;case "source":a.source=b[c];break;case "bgColor":a.bgColor=b[c];break;case "power":a.Ga=b[c];break;case "url":a.url=b[c];break;case "levels":a.o=b[c];break;case "series":a.ac=b[c];break;case "name":a.name=b[c];break;case "plane":a.Fa=b[c];break;case "slides":a.B=b[c];break;default:a[c]=b[c]}return a};function v(a){function b(b){var c=a[b];return function(a){return c(a,0|(a.shiftKey&&w.Na)|(a.ctrlKey&&w.Ma)|(a.altKey&&w.nc)|(a.metaKey&&w.Eb))}}var c,d,e={};for(c in a)d=b(c),c.replace(/^.*:\D+/,"").split(/\D+/).filter(Number).each(function(a){e[a]=d});this.keys=e}function ia(a){this.Rb=[];for(var b=0;b<arguments.length;b++)x(this,arguments[b])}function x(a,b){a.Rb.unshift(b)}
var w=new function(){function a(a){for(var d=a.keyCode,e=(b[b.length-1]||new ia).Rb,g=0,h=e?e.length:0;g<h;){if(d in e[g].keys){e[g].keys[d](a);break}g++}}var b=[];this.Hc=!0;this.xb=function(a){b.push(a)};this.Yb=function(){var a,d=this.Hc?1:0;do a=b.pop();while(b.length>d&&void 0!=a)};this.start=function(){Event.observe(window,"keydown",a);return this};this.stop=function(){Event.stopObserving(window,"keydown",a);return this};this.clear=function(){b=[];return this}};w.Na=1;w.Ma=2;w.nc=4;w.Eb=8;function y(a){u.ib(this,a||{});"string"==typeof this.url&&(this.url=Prototype.K.curry(this.url));this.o.sort(this.Jc)}q=y.prototype;q.Ga=1;q.title="";q.description="";q.source="";q.ea="";q.bgColor="transparent";q.url=function(a,b,c,d){return[this.ea,"?s=",this.id,"&x=",a,"&y=",b,"&z=",c,"&i=",d].join("")};q.Jc=function(a,b){return b[0]-a[0]};q.q=function(a){a=a||0;return[this.o[a][0]/2,this.o[a][1]/2]};q.F=function(a){return z(this,a=a||0)?this.Ga*this.G(a):void 0};
q.G=function(a,b){return this.o[a][0]/this.o[b||0][0]};function ja(a,b,c){return[b[0]*a.G(c),b[1]*a.G(c)]}function A(a,b,c){for(var d=0,e=a.o.length-1;d<e&&!(a.o[d][0]<b&&a.o[d][1]<c);d++);return d}function ka(a,b,c){b*=c;c=[];a=a.o;for(var d=a.length;d--;)c[d]=Math.abs(b-a[d][0]*a[d][0]);return c.indexOf(c.length?Math.min.apply(null,c):void 0)}function z(a,b){return 0<=b&&b==Math.floor(b)&&b<a.o.length}
function la(a,b){for(var c=Infinity,d,e,g=0;g<a.o.length;g++)(e=Math.abs(a.F(g)-b))<c&&(c=e,d=g);return d};function B(){this.l={};this.A={move:[],grab:[],drop:[],zoom:[],load:[],tile:[],attach:[],unload:[],destroy:[],detach:[],resize:[[this,this.Wc]],down:[[this,this.Xa],[this,this.focus]],click:[],dblclick:[[this,this.X]]};this.Ob=[];this.da=this.rb.bind(this);this.Pa=this.Nb.bindAsEventListener(this);this.da=this.rb.bindAsEventListener(this);this.Oa=this.Mb.bindAsEventListener(this);this.Qa=this.wb.bindAsEventListener(this);this.Fb=this.Rc.bindAsEventListener(this);this.tc=this.va.bind(this);this.D=
this.H.bind(this);this.xa=this.Y.bind(this);this.ya=this.ia.bind(this);this.uc=this.ad.curry(this);this.hc=setInterval(this.Fc.bind(this),this.$c);this.name="Viewer"+C.length;this.id=C.push(this)-1}var C=[],D=null;q=B.prototype;q.Ta=50;q.f="vsViewer";q.N=1;q.fc=1;q.gc=2;q.Zc=8;q.$c=8E3;q.hc=0;q.pb="";q.t=!1;q.ma=0;q.na=0;q.offsetX=0;q.offsetY=0;q.j=0;q.n=0;q.Ka=0;q.Ja=0;q.ta=0;q.db=0;q.Bb=0;q.Cb=0;q.eb=0;q.fb=0;q.gb=0;q.hb=0;q.e=Number.POSITIVE_INFINITY;
function E(a,b){var c=a.b?[a.b,a.e,a.q()]:null;a.d&&a.detach();a.d=$(b);ma(a).k("attach",void 0,a.d);c&&a.load.apply(a,c);return a}q.detach=function(a){this.d&&(this.b&&this.La(),this.k("detach",a,this.d),this.d=null);return this};
q.load=function(a,b,c,d,e){if(!this.d)return this;this.loaded()&&this.La();this.b=a;this.ha=[];this.Ia=[];this.e=Number.POSITIVE_INFINITY;na(this,b)||na(this,A(a,this.j,this.n));this.element=this.createElement();this.offsetX=this.offsetY=0;c=c?d?ja(a,c,this.e):c:a.q(this.e);oa(this,c);this.d.observe("mousedown",this.Qa).observe("dblclick",this.Fb).style.backgroundColor=a.bgColor;return pa(this.k("load",e,a,b,c).va())};
q.La=function(a){this.b&&(this.k("unload",a),this.d&&(this.d.stopObserving("dblclick",this.Fb).stopObserving("mousedown",this.Qa),this.element&&this.d.removeChild(this.element),this.d.style.backgroundColor=y.prototype.bgColor),this.b=this.element=null);return this};q.loaded=function(){return!!this.d&&!!this.b};q.i=function(a,b){try{new a(this,b||{})}catch(c){console.error("Error creating widget: %s".C(c.message))}finally{return this}};q.focus=function(){return D=this};
q.Wc=function(){ma(this).loaded()&&this.va()};q.refresh=function(){var a=this.createElement();pa(this,a);this.element&&this.d.removeChild(this.element);this.element=a;return this.va()};q.createElement=function(){var a=(new Element("DIV")).addClassName(this.f);this.cc();a.style.width=parseInt(this.ka,10)+"px";a.style.height=parseInt(this.ja,10)+"px";a.style.left=(this.L=this.j-this.ka>>1)+"px";a.style.top=(this.M=this.n-this.ja>>1)+"px";this.d.appendChild(a);return a};
function pa(a,b){for(var c,d=document.createDocumentFragment(),e=a.Ia,g=e.length,h=a.offsetX-a.L,k=a.offsetY-a.M,l=-h,m=-k,n=a.ka-h,r=a.ja-k;g--;)c=e[g],c[1]<n&&c[2]<r&&c[3]>l&&c[4]>m&&(c[0].style.left=c[1]+h+"px",c[0].style.top=c[2]+k+"px",d.appendChild(c[0]));(b||a.element).appendChild(d);return a}q.cc=function(){this.ka=(2*this.N+1)*screen.width;this.ja=(2*this.N+1)*screen.height};
q.Gb=function(a,b,c,d,e,g){var h=a.style;if(void 0==b&&isNaN(b=parseInt(h.left,10))||void 0==c&&isNaN(c=parseInt(h.top,10)))return this;this.Ia.push([a,b,c,(void 0==d?parseInt(h.width,10)||1:d)+b,(void 0==e?parseInt(h.height,10)||1:e)+c]);g&&(d=this.offsetX-this.L,e=this.offsetY-this.M,b>-d&&c>-e&&b<this.ka-d&&c<this.ja-e&&(h.left=b+d+"px",h.top=c+e+"px",this.element.appendChild(a)));return this};
q.wb=function(a){a.isLeftClick()&&(a.stop(),document.observe("mouseup",this.Pa),this.k("down",null,a,qa(this,a)))};q.Rc=function(a){a.stop();this.k("dblclick",null,a,qa(this,a))};q.Xa=function(a){this.ma=a.screenX;this.na=a.screenY;document.observe("mousemove",this.da).observe("mousemove",this.Oa)};q.rb=function(a){document.stopObserving("mousemove",this.da);this.k("grab",this,a,qa(this,a));this.t=!0};
q.Nb=function(a){document.stopObserving("mousemove",this.da).stopObserving("mousemove",this.Oa).stopObserving("mouseup",this.Pa);this.t?this.refresh().k("drop").t=!1:this.k("click",this,a,qa(this,a))};
q.Mb=function(a){Event.stop(a);var b,c,d=a.screenX;a=a.screenY;var e=[];c=this.element.style;var g=this.A.move,h=g.length,k=this.L,l=this.M;b=k-this.offsetX;var m=l-this.offsetY;c.left=(this.L=b=Math.I(k+this.N*(d-this.ma),this.eb+b,this.fb+b))+"px";c.top=(this.M=c=Math.I(l+this.N*(a-this.na),this.gb+m,this.hb+m))+"px";this.ma=d;this.na=a;this.offsetX+=e[0]=b-k;this.offsetY+=e[1]=c-l;for(sa(this)&&ta(this,0);h--;)g[h][1].call(g[h][0],e,this)};
function sa(a){var b=ua(a,a.offsetX,a.offsetY,a.j,a.n,0),c=a.ta;return b.bb<Math.floor(a.Bb/c)||b.cb>Math.floor(a.Cb/c)||b.Va<a.Bb%c||b.Wa>a.Cb%c}q.X=function(a,b){K(this,this.e+(a.shiftKey?1:-1),b)};function qa(a,b){var c=b.element().cumulativeOffset().relativeTo(a.d.cumulativeOffset());return[c[0]+(b.offsetX||b.layerX)-a.offsetX,c[1]+(b.offsetY||b.layerY)-a.offsetY]}
function K(a,b,c,d){var e=a.e,g=va(a),h=a.Ka,k=a.Ja,l=a.width,m=a.height,n=a.ta-1,r=a.db-1;c=c instanceof Array?c:a.q();if(na(a,b)){var p=a.ha,H=p.length,I=a.b.G(b=a.e,e),M=Math.round(I*h),N=Math.round(I*k),O=M*g.Va,F=N*g.bb,h=Math.round(I*(l%h||h)),k=Math.round(I*(m%k||k)),m=document.createElement("DIV");c=oa(a,ca(c,I));m.style.position="absolute";m.style.zIndex=0;if(e>b)for(;H--;)e=p[H],e.src&&(m.appendChild(e),e.width=e.ba==n?h:M,e.height=e.ca==r?k:N,e.style.left=M*e.ba-O+"px",e.style.top=N*e.ca-
F+"px");a.Ia=[];a.ha=[];a.d.removeChild(a.element);a.element=a.createElement();pa(a.k("zoom",d,b).k("move",a,c).Gb(m,O,F,M*(1+g.Wa)-O,N*(1+g.cb)-F));setTimeout(a.tc,0)}return a}q.R=function(a,b){return K(this,this.e-1,a,b)};q.S=function(a,b){return K(this,this.e+1,a,b)};
q.va=function(){var a=ta,b,c,d,e=this.e,g=this.offsetX-this.L,h=this.offsetY-this.M;d=this.ha;var k=d.length,l=this.Ka,m=this.Ja,n=[],r=[],p;b=va(this);var H=b.Va,I=b.bb,M=b.Wa,N=b.cb,O=this.ta,F=O-1,ea=this.db-1,T=this.width%l||l,ra=this.height%m||m,J=document.createElement("IMG"),G=document.createDocumentFragment();J.style.position="absolute";J.style.display="none";J.style.zIndex=1;for(J.alt="";k--;)p=d[k],b=p.ca,c=p.ba,b<I||b>N||c<H||c>M||(n[b*O+c]=!0,r.push(G.appendChild(p)),p.style.left=l*c+
g+"px",p.style.top=m*b+h+"px");for(b=I;b<=N;++b)for(c=H;c<=M;++c)d=b*O+c,n[d]||(p=J.cloneNode(!1),p.width=c==F?T:l,p.height=b==ea?ra:m,p.style.left=l*c+g+"px",p.style.top=m*b+h+"px",p.onload=this.uc,p.ca=b,p.ba=c,p.rc=this.b.url(c,b,e,d),r.push(G.appendChild(p)));this.element.appendChild(G);this.ha=r;return a(this,this.fc)};
function ta(a,b,c){for(var d=a.ha,e=d.length,g=[],h,k=ua(a,a.offsetX,a.offsetY,a.j,a.n,0<b?b:0),l=k.Va,m=k.bb,n=k.Wa,k=k.cb,r=a.ta,p=m+(k-m)/2,H=l+(n-l)/2;e--;)(h=d[e]).src||h.ca<m||h.ca>k||h.ba<l||h.ba>n||g.push(h);g.sort(function(a,b){var c=b.ca-p,d=b.ba-H,e=a.ca-p,g=a.ba-H;return c*c+d*d-e*e-g*g});for(e=0<c?Math.min(c,g.length):g.length;e--;)g[e].src=g[e].rc;b||(a.Bb=m*r+l,a.Cb=k*r+n);return a}q.ad=function(a){this.style.display="block";a.k("tile");this.onload=null};
q.Fc=function(){if(!this.t&&this.loaded()&&this.gc){for(var a=this.ha,b=a.length;b--;)if(a[b].src&&!a[b].complete)return;ta(this,this.fc+this.gc,this.Zc)}};
function na(a,b){var c;c=a.e;var d=a.loaded()&&c!=(b=b==Number.POSITIVE_INFINITY?a.b.o.length-1:parseInt(b,10))&&z(a.b,b);d&&(z(a.b,c)&&(c=ca(a.q(),a.b.G(b,c)),a.offsetX=Math.round(a.j/2-c[0]),a.offsetY=Math.round(a.n/2-c[1])),c=a.b.o[b],a.ta=Math.ceil((a.width=c[0])/(a.Ka=c[2])),a.db=Math.ceil((a.height=c[1])/(a.Ja=c[3])),a.eb=a.Ta-c[0],a.gb=a.Ta-c[1],a.e=b);return d}
q.moveTo=function(a,b){var c=this.element.style,d=wa(this,a);c.left=(this.L+=d[0])+"px";c.top=(this.M+=d[1])+"px";this.k("move",b,d);sa(this)&&(this.t?this.va():this.refresh());return d};q.moveBy=function(a,b){return this.moveTo([this.offsetX+a[0],this.offsetY+a[1]],b)};q.Z=function(a,b){return this.moveTo([this.j/2-a[0],this.n/2-a[1]],b)};
function xa(a,b,c){function d(a){e.cancel();g.d.stopObserving("mousedown",arguments.callee);g.wb(a);g=e=null}var e,g=a,h=[a.offsetX,a.offsetY],k=wa(a,b);a.offsetX=h[0];a.offsetY=h[1];g.d.observe("mousedown",d);e=new Effect.Tween(a,0,1,Object.extend({cd:Effect.Transitions.sinoidal,md:function(){g.t=!0},ld:function(){g.d.stopObserving("mousedown",d);g.t=!1;g.refresh();g=e=null}},{}),function(a){this.moveTo([h[0]+k[0]*a,h[1]+k[1]*a],c)})}
function wa(a,b){var c=a.offsetX,d=a.offsetY;return[(a.offsetX=Math.I(Math.round(b[0]),a.eb,a.fb))-c,(a.offsetY=Math.I(Math.round(b[1]),a.gb,a.hb))-d]}function oa(a,b){return wa(a,[a.j/2-b[0],a.n/2-b[1]])}function ma(a){if(a.d){var b=a.d.getDimensions();a.j=b.width;a.n=b.height;a.fb=b.width-a.Ta;a.hb=b.height-a.Ta}return a}q.q=function(a){if(this.loaded())return[Math.round((this.j/2-this.offsetX)*(a?this.b.G(0,this.e):1)),Math.round((this.n/2-this.offsetY)*(a?this.b.G(0,this.e):1))]};
function ua(a,b,c,d,e,g){var h=a.Ka,k=a.Ja,l=a.ta-1;a=a.db-1;return{Va:Math.I(Math.floor(-b/h)-g,0,l),bb:Math.I(Math.floor(-c/k)-g,0,a),Wa:Math.I(Math.floor((d-b)/h)+g,0,l),cb:Math.I(Math.floor((e-c)/k)+g,0,a)}}function va(a){return ua(a,a.offsetX-a.L,a.offsetY-a.M,a.ka,a.ja,0)}q.G=function(){return this.b?this.b.G(this.e):void 0};q.F=function(){return this.b?this.b.F(this.e):void 0};function L(a,b,c,d){c=[c,d];a.A[b]?a.A[b].push(c):a.A[b]=[c];return a}
q.k=function(a,b,c){var d=this.Ob,e=0==d.length,g=Array.prototype.slice.call(arguments,2),h=this.A[a],k=0,l;if(h){l=h.length;if(b)for(;k<l;k++)h[k][0]==b||d.push([h[k],g]);else for(;k<l;k++)d.push([h[k],g]);if(e){for(k=0;k<d.length;k++)try{d[k][0][1].apply(d[k][0][0],d[k][1])}catch(m){console.error("[vs.Viewer] doEvent('%s'): %s".C(a,m.message))}this.Ob=[]}}return this};
q.ua=function(a,b,c){var d,e;if("object"==typeof arguments[0])for(e in this.A)for(d=this.A[e].length;d--;)this.A[e][d][0]==arguments[0]&&this.A[e].splice(d,1);else if((e=this.A[a])&&(d=e.length)&&1!=arguments.length)if(2==arguments.length)for(;d--;)e[d][0]==b&&e.splice(d,1);else for(;d--;)e[d][0]==b&&e[d][1]==c&&e.splice(d,1);return this};q.J=function(a){this.request&&this.request.cancel();clearInterval(this.hc);this.k("destroy",a).detach();for(var b in this)delete this[b];D==this&&(D=null);C=C.without(this)};
function ya(a,b,c,d,e,g){a.request&&a.request.cancel();a.request=new Ajax.Request(a.pb,Object.extend({method:"get",parameters:{s:b},onSuccess:a.D,onFailure:a.xa,onTimeout:a.ya,onException:function(a,b){console.error("Ajax exception: %s",b.message)},Db:!0,V:c,sa:d,vc:e,Gc:null},g||{}));return a}q.H=function(a){var b,c=a.request.options;try{b=new y(eval("("+a.responseText+")"))}catch(d){(c.wd||Prototype.emptyFunction)(a.request,d)}this.load(b,c.V,c.sa,c.vc,c.Gc)};q.Y=f();q.ia=f();
var za=new v({"-: 45 109 189 231":function(a,b){Prototype.Browser.Opera&&a.stop();var c=D;if(c&&!c.t)if(b==w.Na){var d=c.e,e=A(c.b,c.j,c.n),g=c.b.q(d);K(c,e,g);c.e==d&&c.Z(g)}else b||c.S()},"+: 43 61 107 187":function(a,b){Prototype.Browser.Opera&&a.stop();var c=D;c&&!c.t&&(b==w.Na?K(c,0):b||c.R())}}),Aa=new ia(za);w.xb(Aa);function Ba(){for(var a,b=C,c=b.length;c--;)(a=b[c]).d&&a.k("resize",null,a.d.getDimensions())}
function Ca(){Event.observe(window,"resize",Ba);w.start();Ajax.Request.addMethods(ha);Ajax.Request.addMethods(ga);Ajax.Responders.register(fa)};function P(a,b){var c,d=Da;u.ib(this,b);this.a=a;this.u&&(a.l[this.u]=this);this.w=[];this.g&&this.g();for(c in d)c in this&&"function"==typeof this[c]&&L(a,d[c],this,this[c]);this.J&&L(this.a,"destroy",this,this.J);for(d=this.w.length;d--;)c=this.w[d],Event.observe(c[0],c[1],c[2]);this.U&&a.d&&this.U(a.d);this.p&&a.loaded()&&this.p(a.b,a.e,a.q())}
P.prototype.J=function(){for(var a,b=this.w.length;b--;)a=this.w[b],Event.stopObserving(a[0],a[1],a[2]);this.a.ua(this);this.oa&&this.oa();this.u&&this.a.l[this.u]&&delete this.a.l[this.u];delete this.a};var Da=Object.clone({U:"attach",vb:"click",vd:"dblclick",pa:"detach",Wb:"drop",Sc:"grab",p:"load",yd:"move",Uc:"resize",zd:"tile",aa:"unload",O:"zoom"});delete Da.oa;
var Q=s(P,{element:null,d:null,f:"",r:!1,T:function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},show:function(){this.r&&this.toggle();return this},hide:function(){this.r||this.toggle();return this},toggle:function(){this.r=!this.r;this.element.toggleClassName("minimized");return this},U:function(a){this.r&&this.hide();$(this.d||a).appendChild(this.element)},pa:function(){this.element.parentNode&&this.element.parentNode.removeChild(this.element)},p:function(){this.visible&&this.element.show()},
aa:function(){this.visible&&this.element.hide()},J:function(){P.prototype.J.call(this);Q.prototype.pa.call(this);this.element=null}});function Ea(a){function b(a){function b(){l=a.offsetX;m=a.offsetY;n=a.e;a.loaded()&&(r=a.b.F(n))}var l,m,n,r;b();c[g]=L(L(L(L(L(a,"move",e,function(){if(this.move)for(var b=g,e=this.ab?1/r:1,k=this.Mc?e*(a.offsetX-l):0,e=this.Nc?e*(a.offsetY-m):0;b--;)c[b]==a||d[b].move(k,e)}),"zoom",e,function(){var b=g,e;if(this.X){for(e=this.ab?a.b.F(a.e):a.e-n;b--;)c[b]==a||d[b].X(e);b=g}for(;b--;)d[b].dc()}),"drop",e,function(){for(var a=g;a--;)c[a].t=!1}),"grab",e,function(){for(var a=g;a--;)c[a].t=!0}),"load",
e,b);d[g++]={move:function(b,c){a.moveTo(e.ab?[r*b+l,r*c+m]:[b+l,c+m],e)},X:function(b){K(a,e.ab?la(a.b,b):n+b,null,e)},qa:function(){console.log("%s: %d %d %d (%d)",a.name,l,m,n,r)},dc:b}}var c=[],d=[],e=this,g=0;this.add=function(a){for(var e=d.length;e--;)d[e].dc();$A(arguments).flatten().each(function(a){c.include(a)||b(a)})};this.remove=function(a){$A(arguments).flatten().each(function(a){a=c.indexOf(a);-1!=a&&(c[a].ua(e),c.splice(a,1),d.splice(a,1),g--)})};this.R=function(){for(var a=g;a--;)c[a].R(null,
this)};this.S=function(){for(var a=g;a--;)c[a].S(null,this)};this.Cc=function(){return c.concat()};this.Sb=function(a){return c.include(a)};this.J=function(){this.remove.apply(this,c);d.length=0;delete this.remove;delete this.add;e=null};this.qa=function(){d.invoke("query")};this.add.apply(this,arguments)}q=Ea.prototype;q.move=!0;q.Mc=!0;q.Nc=!0;q.X=!0;q.ab=!0;function Fa(a,b){var c;if(b.id)c="vs%d_%d".C(a.id,b.id);else if("temp_id"in b)c=b.temp_id;else{do c=b.temp_id="temp_"+Math.floor(Math.random()*Math.pow(2,32));while(document.getElementById(c))}return c}var R={};function S(a,b){var c=Ga,d=$A(arguments).slice(1);1<arguments.length&&arguments[1].constructor instanceof Ga&&(c=d.shift().constructor);d.unshift(c);d.push({className:a});R[a]=new (s.apply(null,d))}function Ga(){}Ga.prototype.f="vsLabel";
Ga.prototype.create=function(a,b){for(var c,d=[],e=b.length,g=a.b.G(a.e),h=(new Element("DIV")).addClassName(this.f).addClassName("level_"+a.e).writeAttribute("vslabel").insert((new Element("DIV")).addClassName("pointer").insert((new Element("DIV")).addClassName("pointer-fill")));e--;)c=b[e],d.push([h.cloneNode(!0).insert(c.term).writeAttribute("id",Fa(a,c)),g*c.x,g*c.y,1,1]);return d};Ga.prototype.highlight=function(a){return a.addClassName("highlighted")};S("default");var Ha=s(B);q=Ha.prototype;q.N=1.5;q.load=function(a,b,c,d,e){if(this.d)return this.loaded()&&this.La(),this.b=a,this.ha=[],this.Ia=[],this.e=Number.POSITIVE_INFINITY,na(this,b)||na(this,A(a,this.j,this.n)),this.element=this.createElement(),this.offsetX=this.offsetY=0,c=c?d?ja(a,c,this.e):c:a.q(this.e),oa(this,c),this.d.observe("touchstart",this.Qa).style.backgroundColor=a.bgColor,pa(this.k("load",e,a,b,c).va())};
q.La=function(a){this.b&&(this.k("unload",a),this.d&&(this.d.stopObserving("touchstart",this.Qa),this.element&&this.d.removeChild(this.element),this.d.style.backgroundColor=y.prototype.bgColor),this.b=this.element=null);return this};q.wb=function(a){a.preventDefault();document.observe("touchend",this.Pa);this.k("down",null,a,[0,0])};q.Xa=function(a){a.preventDefault();this.ma=a.touches[0].screenX;this.na=a.touches[0].screenY;document.observe("touchmove",this.da).observe("touchmove",this.Oa)};
q.rb=function(){document.stopObserving("touchmove",this.da);this.t=!0;this.k("grab",this)};q.Nb=function(a){document.stopObserving("touchmove",this.da).stopObserving("touchmove",this.Oa).stopObserving("touchend",this.Pa);this.t?this.refresh().k("drop").t=!1:this.k("click",this,a,qa(this,a))};
q.Mb=function(a){a.preventDefault();var b,c,d=a.touches[0].screenX;a=a.touches[0].screenY;var e=[];c=this.element.style;var g=this.A.move,h=g.length,k=this.L,l=this.M;b=this.L-this.offsetX;var m=this.M-this.offsetY;c.left=(this.L=b=Math.I(k+this.N*(d-this.ma),this.eb+b,this.fb+b))+"px";c.top=(this.M=c=Math.I(l+this.N*(a-this.na),this.gb+m,this.hb+m))+"px";this.ma=d;this.na=a;this.offsetX+=e[0]=b-k;this.offsetY+=e[1]=c-l;this.Kb+=e[0];this.Lb+=e[1];for((Math.abs(this.Kb)>this.Ka||Math.abs(this.Lb)>
this.Ja)&&ta(this,0);h--;)g[h][1].call(g[h][0],e,this)};var U=s(Q);q=U.prototype;q.u="thumbnail";q.f="vs-widget vsWidgetThumbnail";q.N=2;q.lc=!1;
q.g=function(){this.element=(new Element("DIV")).addClassName(this.f);this.za=(new Element("DIV",{title:"Click to toggle thumbnail visibility"})).addClassName("vs-widget vs-control vsThumbnailControl").observe("click",this.T);this.h=new U.kb;this.h.i(Ia,{relativeTo:this.a});this.h.ua("dblclick",this.h,this.h.X);L(this.h,"drop",this,this.Vc);L(this.h,"grab",this,this.wc);L(this.h,"dblclick",this,this.hd);this.h.N=this.N;this.Q=new Ea(this.h);this.Q.X=!1;this.w.push([this.za,"dblclick",this.T],[this.za,
"mousedown",this.T],[this.za,"mousedown",this.toggle.bind(this)])};q.Wb=function(){this.lc||this.Q.remove(this.a);this.align()};q.Sc=function(){this.Q.add(this.a)};q.toggle=function(){Q.prototype.toggle.call(this);this.za.toggleClassName("minimized")};q.align=function(){this.h.Z(ja(this.h.b,this.a.q(!0),this.h.e));return this};q.hd=function(a,b){var c=this.a.focus(),d=ca(b,c.width/this.h.width);a.shiftKey?c.S(d):c.R(d);this.align()};q.wc=f();
q.Vc=function(){this.lc||this.a.Z(ja(this.a.b,this.h.q(!0),this.a.e),this);this.a.focus()};q.U=function(a){(this.d||a).appendChild(this.element);(this.d||a).appendChild(this.za);E(this.h,this.element)};U.prototype.onResize=U.prototype.O=function(){this.align()};U.prototype.p=function(){this.h.load(this.a.b,null,this.a.q(!0),null,this)};U.prototype.aa=function(){this.h.La(this)};U.prototype.J=function(){this.aa();this.h.J();this.h=null};U.kb=s(B);
U.kb.prototype.load=function(a,b,c,d,e){b=ka(a,this.j,this.n);return B.prototype.load.call(this,a,b,c,!0,e)};U.kb.prototype.cc=function(){this.ka=this.width;this.ja=this.height};var Ia=s(Q);q=Ia.prototype;q.f="vsWidgetROI";q.u="roi";q.g=function(){this.element=(new Element("DIV")).addClassName(this.f);if(this.relativeTo){var a=this.relativeTo;this.relativeTo=a;L(a,"load",this,this.update);L(a,"zoom",this,this.update);this.update()}};
q.update=function(){var a=this.a,b=this.relativeTo,c=this.element,d=c.getStyle("borderTopWidth"),e=c.getStyle("borderLeftWidth"),g=a.width*b.j/b.width,b=a.height*b.n/b.height;c.setStyle({left:Math.round((a.j-g)/2-(0<e.indexOf("px")?parseInt(e,10):0))+"px",top:Math.round((a.n-b)/2-(0<d.indexOf("px")?parseInt(d,10):0))+"px",width:Math.round(g)+"px",height:Math.round(b)+"px"})};q.oa=function(){this.relativeTo&&this.relativeTo.ua(this)};q.p=function(){this.element.show();this.update()};q.aa=function(){this.element.hide()};
q.Uc=Ia.prototype.O=function(){this.update()};var Ja=s(P);q=Ja.prototype;q.u="hyperlink";q.ea=window.location.protocol+"//"+window.location.host+window.location.pathname;q.Za=function(){return[this.ea,"?s=",this.a.b.id,"&z=",this.a.e,"&c=",this.a.q(!0).toString()].join("")};q.update=function(){this.Za()};q.p=Ja.prototype.Wb=Ja.prototype.O=function(){this.update()};var V=s(Q);q=V.prototype;q.u="scalebar";q.f="vs-widget vsWidgetScalebar";q.Ha=100.74;q.Ab=10;q.$=[5,4,3,2,10,8,6,7,9];q.ga=[1,2,5,10,20,25,50,100,200,250,500];q.fa={pm:1E-9,nm:1E-6,"\u03bcm":0.001,mm:1,cm:10,m:1E3};q.error=(new Element("DIV")).addClassName("error").insert("Error making scale bar!");q.g=function(){this.element=(new Element("DIV")).addClassName(this.f);this.r&&(this.r=!1,this.toggle())};q.nb=function(a,b){return 160<=a&&240>=a&&40<b};q.update=function(){this.element.update(this.toElement())};
q.toElement=function(){var a,b,c,d,e=this.a.b.F(this.a.e);if(0==e)return this.error.cloneNode(!0);for(b=0;b<this.$.length;b++)for(a in this.fa)for(c=0;c<this.ga.length;c++)if(d=e*this.Ha*this.fa[a]*this.ga[c],this.nb(d*this.$[b],d))return V.create(e,a,this.Ha*this.fa[a],this.ga[c],this.$[b],this.Ab);return this.error.cloneNode(!0)};q.aa=function(){this.element.update()};q.p=V.prototype.O=V.prototype.update;
V.create=function(a,b,c,d,e,g){d=d||1;e=e||1;var h,k=!0,l;c=t(a*c*d*e,e);var m=g?t(c(),g):null;l="Scale: %d%s @ %sx".C(d*e,b,Math.truncate(a,2));var n=(new Element("DIV",{title:l})).addClassName("scalebarDiv").insert((new Element("TABLE",{cellPadding:0,cellSpacing:0})).insert((new Element("TBODY")).insert(a=new Element("TR")).insert(b=new Element("TR")).insert(h=new Element("TR")))).insert((new Element("SPAN")).addClassName("caption").update(l));if(g){for(l=0;l<g;l++,k=!k)a.insertCell(l).width=b.insertCell(l).width=
m(),a.cells[l].className=k?"light":"dark",b.cells[l].className=k?"dark":"light";h.insertCell(0);h.cells[0].innerHTML=d;h.cells[0].colSpan=g}for(l=0;l<e-(g?1:0);l++,k=!k)a.insertCell(l+g).width=b.insertCell(l+g).width=c(),a.cells[l+g].className=k?"light":"dark",b.cells[l+g].className=k?"dark":"light",h.insertCell(h.cells.length).innerHTML=d*(l+(g?2:1));n.style.minWidth=a.cells[l-1].width*l+10+"px";return n};var Ka=s(Q);q=Ka.prototype;q.u="zoom";q.f="vs-widget vsWidgetZoomControl";q.Lc=6;
q.g=function(){this.element=(new Element("FORM")).addClassName(this.f).insert(this.P=new Element("SELECT",{multiple:!1,disabled:!0})).insert(this.Ya=(new Element("BUTTON",{type:"button",title:"Click to fit slide in window",disabled:!0})).addClassName("vs-control").update("Fit"));this.w.push([this.P,"change",this.onchange.bind(this)],[this.element,"mousedown",this.T],[this.element,"dblclick",this.T],[this.Ya,"click",this.Ac.bind(this)]);this.r&&(this.r=!1,this.toggle())};
q.toggle=function(){Q.prototype.toggle.call(this);this.a.loaded()&&this.p()};q.Ac=function(){var a=this.a,b=a.b,c=a.e,d=b.q(c);this.Ya.blur();K(a,A(b,a.j,a.n),d);a.e==c&&a.Z(d)};q.onchange=function(){this.P.blur();K(this.a,this.P.selectedIndex,null,this)};q.p=function(){var a,b=this.a.b,c=b.o.length;this.P.size=this.r?1:Math.I(c,0,this.Lc);this.P.disabled=this.Ya.disabled=!(1<c);for(a=this.P.length=0;a<c;a++)this.P.options[a]=new Option(Math.truncate(b.F(a),1)+"x",a,!1,a==this.a.e)};
q.aa=function(){this.P.disabled=!0;this.Ya.disabled=!0};q.O=function(){this.P.selectedIndex=this.a.e};q.oa=function(){this.P=null};var La=s(Q);q=La.prototype;q.f="vsWidgetTouchZoom";
q.g=function(){var a=(new Element("DIV")).addClassName("plus").insert((new Element("SPAN")).addClassName("text").insert("+")),b=(new Element("DIV")).addClassName("minus").insert((new Element("SPAN")).addClassName("text").insert("&minus;"));this.ub=(new Element("DIV")).addClassName("notification").hide();this.element=(new Element("DIV")).addClassName(this.f).insert((new Element("DIV")).addClassName("wrapper").insert((new Element("DIV")).addClassName("buttons").insert(a).insert(b)).insert(this.ub));this.w.push([a,
"touchstart",this.R.bindAsEventListener(this)],[b,"touchstart",this.S.bindAsEventListener(this)])};q.p=La.prototype.O=function(){this.Pb&&this.Pb.cancel();this.ub.update("%.3fx".C(this.a.b.F(this.a.e)).replace(/\.?0+(?=x)/,"")).setOpacity(1).show();this.Pb=new Effect.Fade(this.ub,{delay:1.5,duration:0.5})};q.R=function(){this.a.R()};q.S=function(){this.a.S()};var Ma=s(P);q=Ma.prototype;q.u="iterator";q.name="";q.description="";q.g=function(){this.ra(this.ac||{});delete this.ac};q.position=function(a){return(this.B||[]).indexOf(a||this.a.b)};q.go=function(a){var b=0<=a&&a<this.B.length&&a!=this.position();b&&this.Da(a);return b};q.Da=function(a,b,c,d){this.a.load(this.B[a],b,c,d);return this};q.ra=function(a){return Object.extend(this,u.ib({id:null,name:"",description:"",B:[]},a))};q.first=function(){return this.go(0)};
q.last=function(){return this.go(this.B.length-1)};Ma.$a=function(){function a(){var a=D;return a?a.l.iterator:void 0}return new v({"Left arrow: 37":function(b,c){var d=a();if(d)if(c)c==w.Ma&&(b.stop(),d.first());else{var e=d.position();-1<e&&d.go(e+-1)}},"Right arrow: 39":function(b,c){var d=a();if(d)if(c)c==w.Ma&&(b.stop(),d.last());else{var e=d.position();-1<e&&d.go(e+1)}}})}();var W=s(Ma);W.prototype.g=function(){Ma.prototype.g.call(this);this.Sa=this.Sa||{}};W.prototype.position=function(a){return this.B.indexOf(a||this.a.b&&this.a.b.id)};W.prototype.Da=function(a,b,c,d){ya(this.a,this.B[a],b,c,d,this.Sa)};var X=s(Q);X.prototype.u="slidelabel";X.prototype.f="vs-widget vsSlideLabel";
X.prototype.g=function(){this.element=(new Element("DIV")).addClassName(this.f).observe("mousedown",this.T).observe("dblclick",this.T).insert((new Element("DIV")).addClassName("vs-control title").insert(this.ec=new Element("A",{title:"Click to toggle slide description"}))).insert(this.Yc=(new Element("DIV")).addClassName("description"));this.w.push(u.sb?[this.element,"touchstart",this.toggle.bindAsEventListener(this)]:[this.ec,"click",this.toggle.bindAsEventListener(this)]);this.r&&(this.r=!1,this.toggle())};
X.prototype.p=function(a){this.ec.update(a.title||'<i style="font-size:smaller">(Untitled slide)</i>');this.Yc.update(a.description||'<i style="font-size:smaller">(No description)</i>');Q.prototype.p.call(this)};var Na=s(P);q=Na.prototype;q.u="labels";q.url="labels.ajax.php";q.yc="centered";q.request=null;q.v=null;q.la=null;q.ob=0;q.Xc=0;q.Dc=0;q.Oc=0;q.Pc=0;q.g=function(){this.D=this.H.bind(this);this.xa=this.Y.bind(this);this.ya=this.ia.bind(this);this.v=[];this.la=[]};function Oa(a){return a.element().ancestors().find(function(a){return a.readAttribute("vslabel")})}
q.oa=function(){this.request&&this.request.cancel();this.remove(this.v);var a=this.a;a.ua("down",a,a.Xa).ua("dblclick",a,a.X);a.A.down.unshift([a,a.Xa]);a.A.dblclick.unshift([a,a.X])};q.add=function(a){this.v=this.v.concat(a=[].concat(a));Pa(this,a,this.ob);return this};
q.remove=function(a){a=[].concat(a);this.v=Array.prototype.without.apply(this.v,a);var b=this.a,c=a,d,e=c.length;a=[];if(this.a)for(;e--;)(d=document.getElementById(Fa(this.a,c[e])))&&a.push(d);d=b.Ia;c=d.length;for(a=[].concat(a);c--;)for(e=a.length;e--;)if(d[c][0]==a[e]){d.splice(c,1);a.splice(e,1);break}b.refresh();return this};
function Pa(a,b,c){for(var d={},e=b.length,g;e--;)b[e].z&c&&(g=b[e].constructor||a.yc||"default",g in d||(d[g]=[]),d[g].push(b[e]));for(g in d)if(g in R)for(b=R[g].create(a.a,d[g]),e=b.length;e--;)a.a.Gb.apply(a.a,b[e]);pa(a.a);return a}
q.highlight=function(a){for(var b,c=this.la.length;c--;)(b=document.getElementById(Fa(this.a,this.la[c])))&&b.removeClassName("highlighted");this.la=[];a=this.la=[].concat(a||[]);for(c=a.length;c--;)(b=document.getElementById(Fa(this.a,a[c])))&&R[a[c].constructor].highlight(b);return this};
q.Z=function(a,b,c,d){var e=this.a,g=ca([a.x+this.Oc,a.y+this.Pc],e.G());!b||a.z&Math.pow(2,this.a.e)?c?xa(e,[(e.j>>1)-g[0],(e.n>>1)-g[1]],d):e.Z(g):K(e,Math.log(1<<Math.floor(Math.log(a.z)/Math.log(2)))/Math.log(2),g);return this};q.p=function(){this.request=new Ajax.Request(this.url,{method:"get",parameters:{slide_id:this.a.b.id},onSuccess:this.D,onFailure:this.xa,onTimeout:this.ya})};q.aa=function(){this.request&&this.request.cancel();this.v.length=0};
q.O=function(){this.ob=(Math.pow(2,this.a.e)|this.Xc)&~this.Dc;Pa(this,this.v,this.ob).highlight(this.la)};q.H=function(a){var b;try{b=eval("("+a.responseText+")")}catch(c){console.error("vs.widget.Labels.ajaxException(): %s".C(c.message))}this.v=b;this.O()};q.Y=f();q.ia=f();q.search=function(a,b){b=b||this.v;for(var c=[],d=b.length;d--;)a(b[d])&&c.push(b[d]);return c};function Qa(a,b,c,d){return a.search(function(a){return a[b]==c},d)}
function Ra(a,b){var c,d;c=b.id||"";c=(d=c.match(/^vs\d+_(\d+)$/)||c.match(/^(temp_\d+)$/))?d[1]:d;d=Qa(a,"id",c,void 0);d.length||(d=Qa(a,"temp_id",c,void 0));return d.length?d[0]:void 0}function Sa(a,b){var c=b.toLowerCase();return a.search(function(a){return~(a.term||"").toLowerCase().indexOf(c)||a.definition&&~a.definition.stripTags().toLowerCase().indexOf(c)},void 0)}function Ta(a,b,c){return a.search(function(a){return a.z&b},c)}q.sort=function(a,b){return(b||this.v).sort(a)};
function Ua(a,b){return a.sort(function(a,b){return a.term<b.term?-1:a.term>b.term?1:0},b)}function Va(a,b,c){var d=b[0],e=b[1];return a.sort(function(a,b){var c=b.x-d,l=b.y-e,m=a.x-d,n=a.y-e;return m*m+n*n-c*c-l*l},c)};var Wa;function Xa(){var a=C[0];a&&new Ajax.Request("access.ajax.php",{parameters:{clientWidth:a.j,clientHeight:a.n,slide:a.b.id}})}y.prototype.ea="tile.jpeg.php";y.prototype.bgColor="#FFF";y.prototype.Ga=40;y.prototype.url=function(a,b,c,d){return[this.ea,"?s=",this.id,"&z=",c,"&i=",d].join("")};B.prototype.pb="slide.ajax.php";B.prototype.Y=function(){new Ya};B.prototype.ia=function(){new Ya};
S("default",{f:"",Bc:function(a){return(new Element("DIV")).addClassName("vsLabel "+this.className).addClassName("level_"+a.e).writeAttribute("vslabel").insert((new Element("DIV")).addClassName("label").insert((new Element("DIV")).addClassName("content"))).insert((new Element("DIV")).addClassName("pointer").insert((new Element("DIV")).addClassName("pointer-fill")))},update:function(a,b){a.firstChild.firstChild.insert(b.annotation&&!b.term?(new Element("DIV")).addClassName("annotation-icon"):b.term);
return a},create:function(a,b){for(var c,d,e=[],g=b.length,h=a.b.G(a.e),k=this.Bc(a),l=Math.pow(2,a.e);g--;)c=b[g],d=k.cloneNode(!0).writeAttribute("id",Fa(a,c)),c.z&l||d.addClassName(c.z<l?"below":"above"),e.push([this.update(d,c),Math.round(h*c.x),Math.round(h*c.y),1,1]);return this.Ub(a,e)},Ub:function(a,b){return b}});
S("centered",R["default"],{Jb:!0,Vb:!0,Ub:function(a,b){var c,d,e=a.createElement().remove().setStyle({visibility:"hidden"});for(c=b.length;c--;)e.appendChild(b[c][0]);a.d.appendChild(e);for(c=b.length;c--;)d=b[c][0],this.Jb&&(d.firstChild.style.marginLeft=-(d.firstChild.offsetWidth>>1)+"px"),this.Vb&&(d.firstChild.style.marginTop=-(d.firstChild.offsetHeight>>1)+"px");e.remove();return b}});S("top-center",R.centered,{Vb:!1});S("bottom-center",R["top-center"]);S("left-middle",R.centered,{Jb:!1});
S("right-middle",R["left-middle"]);S("top-left2",R["default"]);S("top-right2",R["default"]);S("bottom-left2",R["default"]);S("bottom-right2",R["default"]);S("left-top",R["default"]);S("right-top",R["default"]);var Y=s(V);Y.prototype.u="ruler";Y.prototype.f="vs-widget vsWidgetRuler";Y.prototype.$=[10,8,9,7,6,5,4,3,2];Y.prototype.nb=function(a,b){return a>=0.8*this.a.j&&a<=this.a.j&&40<b};Y.prototype.onResize=V.prototype.update;var Za=s(V);Za.prototype.u="square";Za.prototype.f="vs-widget vsWidgetSquare";
Za.prototype.toElement=function(){var a,b,c,d,e,g,h=this.a.b.F(this.a.e);if(0==h)return this.error.cloneNode(!0);var k=(new Element("DIV")).addClassName("squareDiv").insert(e=(new Element("DIV")).addClassName("vruler")).insert(g=(new Element("DIV")).addClassName("hruler")),l,m;for(b=0;b<this.$.length;b++)for(a in this.fa)for(c=0;c<this.ga.length;c++)if(d=h*this.Ha*this.fa[a]*this.ga[c],this.nb(d*this.$[b],d)){g.insert(V.create(h,a,this.Ha*this.fa[a],this.ga[c],this.$[b],this.Ab));l=a;m=c;b=this.$.length;
break}k.style.minWidth="160px";k.style.rd="20px";e.insert($a(h,l,this.Ha*this.fa[l],this.ga[m],this.Ab));return k};Za.prototype.onResize=V.prototype.update;
function $a(a,b,c,d,e){var g;d=d||1;g=1;var h=!0,k=t(a*c*d*g,g);c=e?t(k(),e):null;a="Scale: %d%s @ %sx".C(d*g,b,Math.truncate(a,2));var l=(new Element("DIV",{title:a})).insert((new Element("TABLE",{cellPadding:0,cellSpacing:0})).insert(a=new Element("TBODY")));for(d=0;d<g-(e?1:0);d++,h=!h)b=a.insertRow(d),b.insertCell(0).height=b.insertCell(1).height=b.insertCell(2).height=k(),b.cells[0].width=b.cells[1].width=b.cells[2].width="10",b.cells[1].className=h?"light":"dark",b.cells[2].className=h?"dark":
"light";if(e)for(c(),g-=1,d=0;d<e;d++,h=!h)b=a.insertRow(d+g),b.insertCell(0).height=b.insertCell(1).height=b.insertCell(2).height=c(),b.cells[0].width=b.cells[1].width=b.cells[2].width="10",b.cells[1].className=h?"light":"dark",b.cells[2].className=h?"dark":"light";l.style.minHeight=a.rows[d-1].cells[1].height*d+10+"px";return l};var ab=s(Q,Ja.prototype,{f:"vs-widget zfHyperlink",g:function(){function a(){this.select()}this.element=(new Element("FORM")).addClassName(this.f).insert((new Element("P")).insert("To this slide")).insert((new Element("DIV")).addClassName("input-100-wrapper").insert((new Element("INPUT",{type:"text",readonly:!0})).observe("click",a))).insert((new Element("P")).insert("To this view")).insert((new Element("DIV")).addClassName("input-100-wrapper").insert((new Element("INPUT",{type:"text",readonly:!0})).observe("click",
a)))},update:function(){var a=this.element.select("INPUT"),b=this.a;a[0].value=this.Za(b.b.id);a[1].value=this.Za(b.b.id,b.e,b.q(!0))},p:function(a,b,c){Ja.prototype.p.apply(this,arguments)},Za:function(a,b,c){var d=this.a.l.iterator,e=window.location;a=["http://",e.host,e.pathname,"?s=",a];d&&d.id&&a.push("&atlas=",d.id);null!=b&&a.push("&z=",b);c&&a.push("&c=",c.join());return a.join("")}});var bb=s(U,{g:function(){function a(a,b){a&&("finished"!=a.state&&(b=0),a.cancel());return b}U.prototype.g.call(this);var b,c,d=!1,e=this.h,g={width:"100px",height:"67px",borderWidth:"2px"},h={width:"350px",height:"250px",borderWidth:"1px"},k={duration:0.2,afterSetup:function(){c=e.q()},afterUpdate:function(){c&&(ma(e).Z(c),e.l.roi.update())}},l=function(){d=!1;e.t||(b=new Effect.Morph(this,Object.extend({style:g,delay:a(b,0.6)},k)))}.bind(this.element),m=function(){d=!0;e.t||(b=new Effect.Morph(this,
Object.extend({style:h,delay:a(b,0.2)},k)))}.bind(this.element);L(e,"drop",this,function(){d||l(null)});this.h.load=function(a,b,c,d,e){b=ka(a,parseInt(h.width,10),parseInt(h.height,10));return B.prototype.load.call(this,a,b,c,!0,e)};L(this.a,"grab",this,function(){b&&b.cancel();this.element.setStyle(g);ma(this.h);this.h.l.roi.update();this.align()});this.element.observe("mouseleave",l).observe("mouseenter",m);this.element.setStyle(g)}});var cb=s(X);cb.prototype.f="vs-widget vsSlideLabel";
cb.prototype.p=function(a){var b=this.a.l.iterator,c=b?b.position():-1,d=this.element.update(),e=a.title,g=(new Element("H1")).addClassName("title");d.insert(e?g.insert(e):g.addClassName("untitled").insert("(Untitled slide)"));b&&-1<c&&d.insert((new Element("DIV")).addClassName("series").insert((new Element("A",{href:"/search.php?atlas=%d&thumbnails=1#results".C(b.id)})).observe("click",function(){this.blur()}).insert(b.name)).insert((new Element("DIV")).insert("Slide %d of %d".C(c+1,b.B.length))));
a.description&&d.insert((new Element("DIV")).addClassName("description").insert(a.description));a.source&&d.insert((new Element("CITE")).insert(a.source))};cb.prototype.aa=function(){this.element.update((new Element("P")).addClassName("no-content").insert("No slide"))};var db=s(W);q=db.prototype;q.Fa="";q.g=function(){W.prototype.g.call(this);this.Sa.onSuccess=this.ed.bind(this)};q.ed=function(a){var b;try{b=new y(eval("("+a.responseText+")")),this.Da(b)}catch(c){console.error("[zfatlas.widget.Iterator]; ajaxSuccess(): error evaling response: %s".C(c.message))}};
q.Da=function(a,b,c,d){if("number"==typeof a)ya(this.a,this.B[a],b,c,d,this.Sa);else{var e=this.a.loaded(),g=-1<this.B.indexOf(a.id),e=g&&e&&-1<this.B.indexOf(this.a.b.id),h=this.a.j,k=this.a.n;z(a,b)||(e?b=la(a,this.a.b.F(this.a.e)):g&&(b=A(a,h,k)));if(!c)if(e)switch(g=this.a.q(!0),c=[g[0]*a.o[b][0]/this.a.b.o[this.a.e][0],g[1]*a.o[b][1]/this.a.b.o[this.a.e][1]],d=e,this.Fa.toLowerCase()){case "coronal":c[0]=g[0];break;case "transverse":c[1]=g[1];break;case "sagittal":case "saggital":c=g}else if(g)switch(z(a,
b)||(b=A(a,h,k),b=-1==b?a.o.length-1:b),d=e,c=a.q(b),this.Fa.toLowerCase()){case "coronal":c[0]=Math.min(h>>1,c[0]);break;case "transverse":c[1]=Math.min(k>>1,c[1]);break;default:c=[Math.min(h>>1,c[0]),Math.min(k>>1,c[1])]}this.a.load(a,b,c,d,this)}};q.ra=function(a){Object.extend(W.prototype.ra.apply(this,arguments),{Fa:a.Fa||""})};var eb=s(db,{f:"vs-widget zf-widget-series-navigator",ea:"/atlas.ajax.php",request:null,list:null,url:function(a){return[this.ea,"?atlas_list=",a].join("")},g:function(){this.element=(new Element("DIV")).addClassName(this.f);this.w.push([this.element,"click",this.mb.bindAsEventListener(this)]);this.sc=this.xc.bind(this);this.D=this.H.bind(this);this.xa=this.Y.bind(this);this.ya=this.ia.bind(this);L(this.a,"load",null,this.bc.bind(this));db.prototype.g.call(this)},update:function(a){this.element.update((new Element("P")).addClassName("no-content").insert(a))},
ra:function(a){W.prototype.ra.call(this,a);this.update("Loading...");this.id?new Ajax.Request(this.url(this.id),{onCreate:this.sc,onFailure:this.xa,onTimeout:this.ya,onSuccess:this.D}):this.Y();return this},U:Q.prototype.U,bc:function(){var a,b=this.position();this.element.select("LI.active").invoke("removeClassName","active");-1<b?(a=this.element.select("LI").find(function(a){return a.value==b+1}))&&a.addClassName("active").zb(Element.pc):this.Y()},mb:function(a){var b=a.findElement("A");if(b)return a.stop(),
b.blur(),a=b.up("LI"),a.hasClassName("active")||this.Da(a.readAttribute("value")-1),!1},yb:function(){var a,b,c,d,e=this.list,g=new Element("OL");a=document;var h=a.createElement("LI"),k=a.createElement("A"),l=a.createDocumentFragment();this.element.update((new Element("H1")).addClassName("title").insert(this.name));this.description&&this.element.insert((new Element("DIV")).addClassName("description").insert(this.description));a=0;for(b=e.length;a<b;a++)d=k.cloneNode(!1),d.href="/view.php?s="+e[a].id+
"&atlas="+this.id,d.innerHTML=e[a].title||"Untitled slide",c=h.cloneNode(!1),c.value=a+1,c.appendChild(d),l.appendChild(c);g.appendChild(l);this.element.insert(g);this.a.loaded()&&this.bc();return this},H:function(a){var b;try{b=eval("("+a.responseText+")")}catch(c){console.log("[zfatlas.widget.SeriesNavigator]:  ajaxSuccess(); error eval'ing response; %s",c.message)}this.list=b||[];this.yb()},xc:function(){this.update("Loading . . .")},Y:function(){this.update("No other slides in this series.")},
ia:function(){this.update("Server timed out.")}});var fb=s(Q,Na.prototype,{f:"vs-widget zf-widget-label-search",Ca:"",sd:2,$a:{"Esc: 27":function(a){var b=this.element.select("INPUT").first();a.stop();b.value?this.lb().Ba():b.blur()}},Aa:{startcolor:"#99ccff",endcolor:"#eeeeee",duration:2},g:function(){var a,b,c={},d=new Element("INPUT",{type:"text",placeholder:"Search labels"}),e=(new Element("DIV")).addClassName("terms"),g=(new Element("DIV",{title:"Clear search [Esc]"})).addClassName("control"),h=!1;for(a in this.$a)c[a]=this.$a[a].bind(this);
b=new ia(new v(c));this.element=(new Element("DIV")).addClassName(this.f).insert((new Element("DIV")).addClassName("input-100-wrapper").insert(d).insert(g)).insert(e);this.w.push([d,"focus",function(){h||(h=!0,w.xb(b))}],[d,"blur",function(){h&&(h=!1,w.Yb())}],[d,"keyup",aa(function(){var a=d.value;a!==this.Ca&&this.Ba(Sa(this,this.Ca=a||""))}.bindAsEventListener(this),150)],[e,"click",function(a){a=a.findElement("DT");var b;a&&(a=Qa(this,"term",a.innerHTML.stripTags()),a.length&&(b=Ta(this,Math.pow(2,
this.a.e),a),b.length&&(a=b),this.Z(Va(this,this.a.q(!0),a)[0],!0),this.a.l.thumbnail&&this.a.l.thumbnail.align()))}.bindAsEventListener(this)],[g,"click",function(a){a.stop();this.lb().Ba()}.bindAsEventListener(this)]);Na.prototype.g.call(this)},lb:function(){this.element.select("INPUT").first().value=this.Ca="";return this},vb:function(a){a=Oa(a);var b;a&&(b=Ra(this,a))&&(this.lb().Ba(),(a=this.element.select("DT").find(function(a){return a.innerHTML==b.term}))&&(a=a.up("DL"))&&a.zb(Element.jb,
!0).highlight(this.Aa))},H:function(a,b){Na.prototype.H.apply(this,arguments);this.Ba()},Ba:function(a){var b=this.element.select("DIV.terms").first(),c,d=[];a=a||this.v||[];a=Ua(this,da(a.concat(),function(a,b){return a.term_id-b.term_id}));if(this.v.length)if(a.length){for(var e=0,g=a.length;e<g;e++)c=a[e],d.push("<DL><DT>",c.term,"</DT>"),c.definition&&d.push("<DD>",c.definition,"</DD>"),d.push("</DL>");b.update(this.Ca?ba(d.join(""),this.Ca.split(/\s+/)):d.join(""))}else b.update((new Element("P")).addClassName("no-content").insert("No matches"));
else b.update((new Element("P")).addClassName("no-content").insert("No labels present on this slide"));return this}});Wa=function(){function a(){g.update(this);this.onload=null}function b(b){var c=b.findElement("A"),d=document.body,m=document.createElement("IMG"),c=(c=c.href.match(/[?&]s=(\d+)/))?"thumbnails/preview/%010d.jpg".C(c[1]):!1,n=b.pointerX();b=b.pointerY();var r=document.viewport.getDimensions(),p={left:"auto",top:"auto",right:"auto",bottom:"auto"};n>d.scrollLeft+r.width/2?p.right=d.offsetWidth-n+"px":p.left=n+"px";b>d.scrollTop+r.height/2?p.bottom=d.offsetHeight-b+"px":p.top=b+"px";!1!==c&&(g.setStyle(p).update(e).show(),
m.onload=a,m.src=c)}function c(){g.hide()}function d(a){var d=b,e=c;(0,Prototype.K)(a);return a.observe("mouseenter",d).observe("mouseleave",e)}var e=new Element("IMG",{src:"images/loading-preview-im.gif"}),g=(new Element("DIV")).addClassName("vs-hover-preview").insert(e);return function(a,b){$(document.body).insert(g.hide());a.select("A").findAll(function(a){return b.test(a.href)}).map(d)}}();function gb(){var a,b,c,d={duration:0.25,queue:"end"};this.Hb?(c=function(c){b.stopObserving("click",arguments.callee);$("blackout").fade(d).update();w.Yb();b=a=null},a=(new Element("DIV")).addClassName("close-bar").insert(b=(new Element("BUTTON",{type:"button"})).insert("Dismiss").observe("click",c)),w.xb(new ia(new v({"Esc: 27":c})))):w.stop();$("blackout").appear(d).update(this.toElement().insert({top:a}))}gb.prototype.Hb=!0;gb.prototype.toElement=function(){return(new Element("DIV")).addClassName("blackout-content")};
var hb=s(gb);hb.prototype.Hb=!1;hb.prototype.toElement=function(){return(new Element("DIV")).addClassName("blackout-content").insert('\t\t<div class="shadow-box"><h1>Slide Not Found</h1> \t\t\t<p>Sorry, but we couldn\'t find that slide.  Maybe you\'d like to go somewhere else?</p> \t\t\t<ul> \t\t\t\t<li><a href="index.php">Zebrafish Atlas home page</a></li> \t\t\t\t<li><a href="progress.php">Zebrafish Atlas overview chart</a></li> \t\t\t\t<li><a href="search.php">Search slides</a></li> \t\t\t\t<li><a href="contact.php">Contact us</a></li> \t\t\t</ul> \t\t</div> \t')};
var Ya=s(gb);Ya.prototype.toElement=function(){return(new Element("DIV")).addClassName("blackout-content").insert('\t\t<div class="shadow-box"><h1>Server Unavailable</h1> \t\t<p>Sorry, but the server is taking too long to respond.  This may be a temporary condition; you can try again.</p> \t')};var jb=function(){function a(){var a=C[0];return a?a.l:void 0}function b(){var b=a();return b?b.panel:void 0}function c(c,d){ib(b(),a()[c],d)}function d(){a().labels.element.select("INPUT").first().focus()}function e(a){return a&(w.Ma|w.Eb)}return new v({"spacebar: 32":function(a){a.stop();b().toggle()},"Esc: 27":function(){b().Ua().hide()},"a: 65":function(a,b){e(b)||c("slidelabel")},"k: 75":function(a,b){e(b)||c("hyperlink")},"s: 83":function(a,b){e(b)||c("iterator")},"l: 76":function(a,b){e(b)||
c("labels")},"f: 70":function(a,b){e(b)||(a.stop(),c("labels",d))},"h,?: 72 191":function(a,b){e(b)||c("help")},"R: 82":function(b,c){var d=a();d&&c==w.Na&&("square"in d?d.square.J():"ruler"in d?(d.ruler.J(),C[0].i(Za)):C[0].i(Y))}})}();var kb=s(Q);q=kb.prototype;q.f="zf-ui-sliding-panel";q.Ea="right";q.u="panel";q.Aa={duration:0.2,transition:Effect.Transitions.sinoidal,queue:{position:"end",scope:"sliding-panel"}};
q.g=function(){this.l=[];this.element=(new Element("DIV")).addClassName(this.f).addClassName(this.Ea).observe("dblclick",this.T).observe("mousedown",this.T).insert((new Element("DIV",{title:"Click to toggle panel visibility [spacebar]"})).addClassName("control").observe("click",this.toggle.bind(this))).insert((new Element("DIV")).addClassName("content-wrapper").insert(this.content=(new Element("DIV")).addClassName("content")));this.element.observe("click",function(a){var b=a.findElement("A");b&&(a.stop(),
window.open(b.href,"zfatlas"))})};q.Xb=function(){this.scrollTop=this.scrollLeft=0};q.U=function(a){Q.prototype.U.apply(this,arguments);a.observe("scroll",this.Xb)};q.pa=function(a){Q.prototype.pa.apply(this,arguments);a.stopObserving("scroll",this.Xb)};
q.i=function(a,b,c,d,e){var g,h=Prototype.emptyFunction,k=(new Element("DIV")).addClassName("wrapper").setStyle({display:"none"}),l=(new Element("DIV")).addClassName("zf-ui-panel-widget");try{g=new b(this.a,Object.extend({d:k},Object.clone(c)))}catch(m){console.error("[zfatlas.ui.SlidingPanel] addWidget(); failed to create widget: %s",m.message)}g&&(this.l.push({fd:g,Tc:d?d.bind(g,this):h,td:e?e.bind(g,this):h}),this.content.insert(l.insert((new Element("DIV")).addClassName("title").insert(a).insert((new Element("DIV")).addClassName("status")).observe("click",
this.mb.bind(this))).insert(k)));return this};function lb(a,b){var c=(a=a instanceof Element?a:a.element)&&a.up(".zf-ui-panel-widget"),c=(c=c&&c.select(".title").first())&&c.select(".status").first();null!==b&&c.update(b)}function mb(a,b){var c=a.Ra;c&&c.removeClassName("active");b&&b.addClassName("active");return a.Ra=b}function nb(a){return(a=a&&a.up(".zf-ui-panel-widget"))?a.select(".wrapper").first():a}q.Ua=function(){var a=this.Ra;a&&(new Effect.BlindUp(a,this.Aa),mb(this));return this};
q.mb=function(a){a=nb(Event.findElement(a));a==this.Ra?this.Ua():ib(this,a)};function ob(a,b){return a.l.find(function(a){return a.fd.d==b})}function ib(a,b,c){b=nb(b instanceof Element?b:b.element);var d=a.Ra,e=ob(a,b),g=[],h={sync:!0};a.show();if(b&&b!=d)return d&&g.push(new Effect.BlindUp(d,h)),g.push(new Effect.BlindDown(mb(a,b),Object.extend({afterFinish:e?c||e.Tc:Prototype.emptyFunction},h))),new Effect.Parallel(g,a.Aa),a;c&&c()}
q.toggle=function(){var a="top"==this.Ea||"bottom"==this.Ea?"height":"width",a=(this.r=!this.r)?"-"+this.element.getStyle(a):"0px",b={};this.r&&document.activeElement&&document.activeElement.descendantOf(this.element)&&document.activeElement.blur();Object.extend(b,this.Aa);b.style=this.Ea+":"+a;new Effect.Morph(this.element,b);return this};var pb=s(Q,{u:"help",f:"vs-widget",g:function(){this.element=(new Element("DIV")).addClassName(this.f).insert('<H2>Movement</H2><P>Moving around in a slide is fairly intuitive.  Just hold down the left mouse button and drag the slide around.</P><HR><H2>Zoom</H2><P>To change the magnification, use either the zoom control in the upper-left corner or double-click with your mouse (shift + double-click zooms out).</P><HR><H2>Navigation</H2><P>If a slide is a member of a series, you can navigate to other slides in the series using either using the keys listed below or by clicking on a title in the list under the &quot;Other slides in this series&quot; panel.</P><HR><H2>Keys</H2><P>Frequent users might find these keyboard shortcuts helpful.</P><TABLE><TR><TD>-</TD><TD>Zoom out one level</TD></TR><TR><TD>+</TD><TD>Zoom in one level</TD></TR><TR><TD>(shift) +</TD><TD>Zoom in to highest resolution</TD></TR><TR><TD>(shift) -</TD><TD>Fit slide in window (if possible)</TD></TR><TR><TD>left arrow</TD><TD>Next slide in a series</TD></TR><TR><TD>right arrow</TD><TD>Previous slide in a series</TD></TR><TR><TD>(ctrl) left arrow</TD><TD>First slide in a series</TD></TR><TR><TD>(ctrl) right arrow</TD><TD>Last slide in a series</TD></TR><TR><TD>(spacebar)</TD><TD>Toggle this sliding panel</TD></TR><TR><TD>a</TD><TD>Open &quot;About this slide&quot;</TD></TR><TR><TD>k</TD><TD>Open &quot;Link to this slide&quot;</TD></TR><TR><TD>s</TD><TD>Open &quot;Other slides in this series&quot;</TD></TR><TR><TD>l</TD><TD>Open &quot;Labels on this slide&quot;</TD></TR><TR><TD>h or ?</TD><TD>Display this help</TD></TR></TABLE><HR><P>Please <A href="/contact.php">contact us</A> with any comments or issues you have.</P>')}});var Z={f:"comparisonViewerContainer",l:[],Tb:0,$b:function(){return!1},Qb:function(){var a={};return function(b,c){var d,e=a[b];if(!e||e.closed)if(d=[],a[b]={wa:{add:function(a,b){d.push([a,b])},$b:function(c){if(c!=e.wa)return!1;a[b]=e;c.g(d);return!0}}},e=window.open("",b,"resizable=yes,width=200,height=200,left=2200,top=1300"))e.wa?a[b]=e:e.location.href=c;return a[b].wa}}(),g:function(a,b){function c(){var a=b.appendChild((new Element("DIV")).addClassName(g.f).hide());1==l.push(a)&&(m=parseInt(a.getStyle("marginLeft"),
10)||0,n=parseInt(a.getStyle("marginTop"),10)||0,r=parseInt(a.getStyle("borderLeftWidth"),10)||0,p=parseInt(a.getStyle("borderTopWidth"),10)||0);d();return a.appear({duration:0.25})}function d(){var a=l.length,c,d,e=0,h=b.getDimensions(),F,ea,T,ra,J,G=g.qb(a);c=G.length;a=0;ra=t(h.width-(c+1)*m-2*c*r,c);for(d=0;d<G.length;d++){c=G[d];F=ra();T=0;for(J=t(h.height-(c+1)*n-2*c*p,c);c--;)ea=J(),l[e++].setStyle({width:F+"px",height:ea+"px",left:a+"px",top:T+"px"}),T+=ea+n+2*p;a+=F+m+2*r}for(e=k.length;e--;)(h=
k[e]).d&&(a=h.d.getDimensions(),G=a.width-h.j>>1,c=a.height-h.n>>1,h.k("resize",null,a),h.loaded()&&h.moveBy([G,c],h))}function e(){window.sessionStorage&&window.sessionStorage.setItem("loaded",window.JSON.stringify(a));g.length=k.length}var g=this,h=u.sb?Ha:B,k=[],l=[],m=0,n=0,r=0,p=0;a=a||[];b=$(b||document.body);this.add=function(b,d){if(!(this.Tb&&k.length>=this.Tb)){var g=E(new h,c());this.l.each(g.i,g);k.push(ya(g,b,d));a.push([b,d]);e()}};this.remove=function(b){for(var c=k.length;c--;)k[c].d==
b&&(k[c].J(),k.splice(c,1),l[c].remove(),l.splice(c,1),a.splice(c,1),d(),0==k.length?this.close():e())};this.close=function(){window.close()};Event.observe(b,"mousedown",function(a){a.stop()});Event.observe(window,"resize",d);Ca();x(Aa,new v({"Esc: 27":function(){b.toggleClassName("vs-hide-widgets")}}));(function(){var b,d,m=a.length;for(d=0;d<m;d++)c();for(d=0;d<m;d++)b=E(new h,l[d]),g.l.each(b.i,b),k.push(ya(b,a[d][0],a[d][1]));m&&k[0].focus();e()})()},qb:function(a){for(var b=0,c=Math.floor(Math.sqrt(a-
1))+1,d=Math.floor(a/c),e=[];b<c;)e[b++]=d+(b<=a%c);return e.reverse()}};Z.Ua=s(Q,{f:"vs-widget comparison-widget button close",g:function(){this.element=(new Element("DIV",{title:"Remove from comparison"})).addClassName(this.f);this.w.push([this.element,"mousedown",Event.stop],[this.element,"dblclick",Event.stop],[this.element,"click",this.close.bind(this)])},close:function(){Z.remove(this.a.d)}});
Z.tb=s(Q,{f:"vs-widget comparison-widget button link",Ib:!1,Q:new Ea,W:[],g:function(){this.element=(new Element("DIV",{title:"Toggle link; Ctrl+click affects all viewers"})).addClassName(this.f);this.w.push([this.element,"click",this.bd.bindAsEventListener(this)],[this.element,"mousedown",Event.stop],[this.element,"dblclick",Event.stop]);this.D=this.a.D;this.a.D=this.a.D.wrap(this.H).bind(this)},H:function(a,b,c){var d,e=b.request.options,g=this.W,h=0,k=0;try{e.V||0===e.V||(d=new y(eval("("+b.responseText+
")")),g.each(function(a){a.loaded()&&(h++,k+=a.b.F(a.e))}),e.V=la(d,k/h))}catch(l){}finally{a(b,c)}},oa:function(){this.pa();this.a.D=this.D},U:function(a){$(this.d||a).insert(this.element);this.W.push(this.a);this.Ib&&this.link()},pa:function(){var a=this.element.parentNode;a&&a.removeChild(this.element);this.Q.Sb(this.a)&&this.kc();this.W.splice(this.W.indexOf(this.a),1)},link:function(){var a=this.Q;(2==this.W.length?this.W:[this.a]).each(function(b){b.d.addClassName("linked");a.add(b)})},kc:function(){var a=
this.Q;(2==a.Cc().length?this.W:[this.a]).each(function(b){b.d.removeClassName("linked");a.remove(b)})},Kc:function(){this.Q.add(this.W.each(function(a){a.d.addClassName("linked")}))},dd:function(){this.Q.remove(this.W.each(function(a){a.d.removeClassName("linked")}))},bd:function(a){var b=this.Q.Sb(this.a);a.stop();a.ctrlKey?b?this.dd():this.Kc():b?this.kc():this.link()}});
Z.mc=s(Q,{f:"vs-widget comparison-widget zoom",g:function(){var a,b;this.element=(new Element("DIV")).addClassName(this.f).insert(a=(new Element("DIV",{title:"Zoom in; Shift+click for maxiumum zoom"})).addClassName("button plus")).insert(b=(new Element("DIV",{title:"Zoom out; Shift+click for best fit"})).addClassName("button minus")).insert(this.Ga=new Element("DIV"));this.w.push([this.element,"dblclick",Event.stop],[this.element,"mousedown",Event.stop],[a,"click",this.R.bindAsEventListener(this)],
[b,"click",this.S.bindAsEventListener(this)])},R:function(a){var b=this.a;a.shiftKey?K(b,0):b.R()},S:function(a){var b=this.a,c=b.b;a.shiftKey?K(b,A(c,b.j,b.n)):b.S()},p:function(){this.O()},O:function(){var a=this.a;this.Ga.update(Math.truncate(a.b.F(a.e),2)+"x")}});
Z.jc=s(Q,{f:"vs-widget comparison-widget title",g:function(){this.element=(new Element("DIV")).addClassName(this.f);this.w.push([this.element,"mousedown",Event.stop],[this.element,"dblclick",Event.stop])},p:function(a){this.element.innerHTML=a.title;Q.prototype.p.call(this)}});window.zfatlas={};
window.zfatlas.FullScreenViewer=function(a,b,c){var d,e,g=u.sb,h=g?new Ha:new B;Event.observe(document,"dom:loaded",function(){var k=u.qa.c,k=k&&k.match(/^\d+,\d+$/)?k.split(","):null;E(h,$(a)).i(V).i(db).focus();g?h.i(La).i(Na).i(X,{f:"zf-widget vs-widget vsSlideLabel",r:!0}).d.addClassName("vsTouch"):(h.i(Ka).i(kb,{Ea:"right"}),d=ib(h.l.panel.i("<u>A</u>bout this slide",cb).i("Lin<u>k</u> to this slide",ab).i("Other slides in this <u>s</u>eries",eb,{g:function(){eb.prototype.g.call(this);L(this.a,
"load",null,function(){lb(this,this.B&&-1<this.position()?this.B.length:0)}.bind(this))},yb:function(){eb.prototype.yb.call(this);Wa(this.element,/view\.php\?.*?\bs=\d+/)}},function(){this.element.select("LI.active").each(function(a){a.zb(Element.jb)})}).i("<u>L</u>abels on this slide",fb,{H:function(){fb.prototype.H.apply(this,arguments);lb(this,this.v.length)},vb:function(a){Oa(a)&&ib(d,this,fb.prototype.vb.bind(this,a))}}).i("Viewer <u>h</u>elp",pb),h.l.slidelabel),h.i(bb,{d:d.element}));L(h,"load",
null,aa(Xa,5E3));Ca();x(Aa,Ma.$a);x(Aa,jb);e=h.l.iterator.ra(c);0<b.id?h.load(new y(b),u.qa.z,k,!0):c.slides&&c.slides.length?e.first():new hb});return h};
window.zfatlas.Reference=function(){var a=new B;Event.observe(document,"dom:loaded",function(){function b(a){var b=[];do b.push(a.select("SPAN.term").first().innerHTML);while(a=a.up("LI"));return b}function c(){var a=k.offsetHeight,b=document.viewport.getHeight();k.style.top=(b-a>>1)+"px"}function d(c){var d=$(c);l.update(d.innerHTML);$("reference-hierarchy").update(b(d.up("LI")).reverse().join(" > "));h.show();w.start();ya(ma(a),parseInt(c.replace("ref-",""),10))}function e(){h.hide();w.stop()}var g=
$("reference-vs"),h=$("blackout"),k=$("reference-wrapper"),l=$("reference-term"),m=$("reference-desc"),n=$("reference-refs"),r="Merriam-Webster;ZFIN;TheFreeDictionary Medical Dictionary;Kimmel, et al.;Dorland's Medical Dictionary for Health Consumers;Whitfield;Isogai, et al.;Wallace, et al.;Finney, et al.;The American Heritage Medical Dictionary;Saunders Comprehensive Veterinary Dictionary;Drummond;Hu, et al.;Wehman, et al.;Wingert, 2007".split(";"),p=window.location.hash.match(/ref-\d+$/);a.pb="reference.php";
a.D=function(a){a=new y(eval("("+a.responseText+")"));"startzoom"in a&&(a.V=a.startzoom);"startpos"in a&&(a.sa=a.startpos);this.load(a,a.V,a.sa,!0);m.update(a.description);n.update();if(a.source){for(var b=new Element("OL"),d=0;d<r.length;d++)a.source&1<<d&&b.insert((new Element("LI")).insert(r[d]));n.insert((new Element("P")).insert("References:")).insert(b)}a.gd&&n.insert('<p>ZFIN ID: <a href="http://zfin.org/action/anatomy/term-detail?anatomyItem.zdbID=%s">%1$s</a></p>'.C(a.gd));$("reference-fullscreen").href=
"/view.php?s=%d&z=%d&c=%s".C(a.id,a.V,a.sa.toString());c()}.bind(a);E(a,g).focus().i(V).i(X).i(Ka,{r:!0});p&&d(p[0]);$("reference-terms").observe("click",function(a){(a=a.element().up("A"))&&/^ref-\d+$/.test(a.id)&&d(a.id)});$("reference-center").observe("click",function(b){b&&b.stop();b=a.b;a.load(b,b.V,b.sa,!0)});$("reference-close").observe("click",function(a){a.preventDefault();e()});Event.observe(window,"resize",c);x(Aa,new v({"Esc: 27":e}))});Ca();return a};
window.zfatlas.Comparison=function(){document.observe("dom:loaded",function(){function a(a){return parseInt(a,10)}var b=u.qa["s[]"],c=window.opener,c=c&&!c.closed&&c.wa&&c.wa.Qb(window.name,"").$b,d;try{d=window.JSON.parse(""+window.sessionStorage.getItem("loaded"))}catch(e){d=null}if(b){Object.isArray(b)||(b=[b]);switch(u.qa.layout){case "horizontal":case "row":Z.qb=function(a){for(var b=[];a--;)b[a]=1;return b};break;case "vertical":case "column":Z.qb=function(a){return[a]}}Z.l.push(V,Z.tb,Z.mc,
Z.jc);Z.tb.prototype.Ib=!0;b=b.filter(RegExp.prototype.test,/\d+(?:,\d+){0,3}/).map(function(b){b=b.split(",").map(a);var c=b.length;return[b[0],{sa:2<c?b.splice(c-2,2):null,V:1<c?b[1]:null}]});Z.g(b)}else Z.l.push(V,Z.tb,Z.mc,Z.Ua,Z.jc),d&&d.length?Z.g(d):c&&c(Z)})};window.zfatlas.addPreviewThumbnails=Wa;window.Comparison={};window.Comparison.getComparison=Z.Qb;})();
